
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="ie=edge" http-equiv="x-ua-compatible"/>
<meta content="Everything you need to know about Fetch.AI." name="description"/>
<link href="https://docs.fetch.ai/performance-benchmark/" rel="canonical"/>
<meta content="diarmid.campbell@fetch.ai" name="author"/>
<meta content="Copy to clipboard" name="lang:clipboard.copy"/>
<meta content="Copied to clipboard" name="lang:clipboard.copied"/>
<meta content="en" name="lang:search.language"/>
<meta content="True" name="lang:search.pipeline.stopwords"/>
<meta content="True" name="lang:search.pipeline.trimmer"/>
<meta content="No matching documents" name="lang:search.result.none"/>
<meta content="1 matching document" name="lang:search.result.one"/>
<meta content="# matching documents" name="lang:search.result.other"/>
<meta content="[\s\-]+" name="lang:search.tokenizer"/>
<link href="../assets/images/favicon.png" rel="shortcut icon"/>
<meta content="mkdocs-1.1.2, mkdocs-material-4.6.3" name="generator"/>
<title>Performance benchmark - AEA Developer Documentation</title>
<link href="../assets/stylesheets/application.adb8469c.css" rel="stylesheet"/>
<script src="../assets/javascripts/modernizr.86422ebf.js"></script>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
<link href="../assets/fonts/material-icons.css" rel="stylesheet"/>
<link href="../css/my-styles.css" rel="stylesheet"/>
</head>
<body dir="ltr">
<svg class="md-svg">
<defs>
</defs>
</svg>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<a class="md-skip" href="#what-is-it" tabindex="0">
        Skip to content
      </a>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a aria-label="AEA Developer Documentation" class="md-header-nav__button md-logo" href="https://docs.fetch.ai/" title="AEA Developer Documentation">
<i class="md-icon">code</i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
              AEA Developer Documentation
            </span>
<span class="md-header-nav__topic">
              
                Performance benchmark
              
            </span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
</div>
</div>
</nav>
</header>
<div class="md-container">
<nav class="md-tabs md-tabs--active" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="..">
          AEA Framework
        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" role="main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title md-nav__title--site" for="__drawer">
<a class="md-nav__button md-logo" href="https://docs.fetch.ai/" title="AEA Developer Documentation">
<i class="md-icon">code</i>
</a>
    AEA Developer Documentation
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-toggle md-nav__toggle" data-md-toggle="nav-1" id="nav-1" type="checkbox"/>
<label class="md-nav__link" for="nav-1">
      AEA Framework
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-1">
        AEA Framework
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href=".." title="Welcome">
      Welcome
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../version/" title="Version">
      Version
    </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-3" id="nav-1-3" type="checkbox"/>
<label class="md-nav__link" for="nav-1-3">
      Concepts
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-1-3">
        Concepts
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../language-agnostic-definition/" title="Language Agnostic Definition">
      Language Agnostic Definition
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../agent-oriented-development/" title="Agent-oriented development">
      Agent-oriented development
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../vision/" title="Vision">
      Vision
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../app-areas/" title="Application areas">
      Application areas
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../oef-ledger/" title="Relation to OEF and Ledger">
      Relation to OEF and Ledger
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../identity/" title="Identity">
      Identity
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-4" id="nav-1-4" type="checkbox"/>
<label class="md-nav__link" for="nav-1-4">
      Demos
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-1-4">
        Demos
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../aries-cloud-agent-demo/" title="Aries Cloud Agents Demo">
      Aries Cloud Agents Demo
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../car-park-skills/" title="Car park skills">
      Car park skills
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../generic-skills/" title="Generic skills">
      Generic skills
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../gym-example/" title="Gym example">
      Gym example
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../gym-skill/" title="Gym skill">
      Gym skill
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ml-skills/" title="ML skills">
      ML skills
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tac-skills/" title="TAC skills">
      TAC skills
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tac-skills-contract/" title="TAC skills ledger-based">
      TAC skills ledger-based
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tac/" title="TAC external app">
      TAC external app
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../thermometer-skills/" title="Thermometer skills">
      Thermometer skills
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../weather-skills/" title="Weather skills">
      Weather skills
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5" id="nav-1-5" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5">
      Development
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-1-5">
        Development
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-1" id="nav-1-5-1" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-1">
      Getting started
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="3">
<label class="md-nav__title" for="nav-1-5-1">
        Getting started
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../quickstart/" title="AEA quick start">
      AEA quick start
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../core-components-1/" title="Core components - Part 1">
      Core components - Part 1
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../aea-vs-mvc/" title="AEA and web frameworks">
      AEA and web frameworks
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../skill-guide/" title="Build a skill for an AEA">
      Build a skill for an AEA
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../core-components-2/" title="Core components - Part 2">
      Core components - Part 2
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../thermometer-skills-step-by-step/" title="Trade between two AEAs">
      Trade between two AEAs
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-2" id="nav-1-5-2" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-2">
      Topic guides
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="3">
<label class="md-nav__title" for="nav-1-5-2">
        Topic guides
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../step_one/" title="Ways to build an AEA">
      Ways to build an AEA
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../build-aea-step-by-step/" title="Build an AEA with the CLI">
      Build an AEA with the CLI
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../scaffolding/" title="Scaffolding packages">
      Scaffolding packages
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../protocol-generator/" title="Generating protocols">
      Generating protocols
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/" title="Logging">
      Logging
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../multiplexer-standalone/" title="Use multiplexer stand-alone">
      Use multiplexer stand-alone
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../standalone-transaction/" title="Create stand-alone transaction">
      Create stand-alone transaction
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../decision-maker-transaction/" title="Create decision-maker transaction">
      Create decision-maker transaction
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../deployment/" title="Deployment">
      Deployment
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../known-limits/" title="Known limitations">
      Known limitations
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../build-aea-programmatically/" title="Build an AEA programmatically">
      Build an AEA programmatically
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cli-vs-programmatic-aeas/" title="CLI vs programmatic AEAs">
      CLI vs programmatic AEAs
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../agent-vs-aea/" title="AEAs vs agents">
      AEAs vs agents
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../upgrading/" title="Upgrading versions">
      Upgrading versions
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-3" id="nav-1-5-3" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-3">
      Use case components
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="3">
<label class="md-nav__title" for="nav-1-5-3">
        Use case components
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../generic-skills/" title="Generic skills">
      Generic skills
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../connect-a-frontend/" title="Frontend intergration">
      Frontend intergration
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../http-connection-and-skill/" title="HTTP Connection">
      HTTP Connection
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../orm-integration/" title="ORM integration">
      ORM integration
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../erc1155-skills/" title="Contract deploy and interact">
      Contract deploy and interact
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../aries-cloud-agent-example/" title="Identity - Aries Cloud Agent">
      Identity - Aries Cloud Agent
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../p2p-connection/" title="P2P Connection">
      P2P Connection
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ledger-integration/" title="Using public ledgers">
      Using public ledgers
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../raspberry-set-up/" title="Build an AEA on a Raspberry Pi">
      Build an AEA on a Raspberry Pi
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-4" id="nav-1-5-4" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-4">
      Architecture &amp; component deep-dives
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="3">
<label class="md-nav__title" for="nav-1-5-4">
        Architecture &amp; component deep-dives
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../design-principles/" title="Design principles">
      Design principles
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../diagram/" title="Architectural diagram">
      Architectural diagram
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../connection/" title="Connections">
      Connections
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../protocol/" title="Protocols">
      Protocols
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../skill/" title="Skills">
      Skills
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../contract/" title="Contracts">
      Contracts
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../decision-maker/" title="Decision Maker">
      Decision Maker
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../config/" title="Configurations">
      Configurations
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-5" id="nav-1-5-5" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-5">
      Search &amp; Discovery
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="3">
<label class="md-nav__title" for="nav-1-5-5">
        Search &amp; Discovery
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../defining-data-models/" title="Defining Data Models">
      Defining Data Models
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../query-language/" title="The Query Language">
      The Query Language
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-6" id="nav-1-5-6" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-6">
      Developer Interfaces
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="3">
<label class="md-nav__title" for="nav-1-5-6">
        Developer Interfaces
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-6-1" id="nav-1-5-6-1" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-6-1">
      CLI
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="4">
<label class="md-nav__title" for="nav-1-5-6-1">
        CLI
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../cli-how-to/" title="Installation">
      Installation
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cli-commands/" title="Commands">
      Commands
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../package-imports/" title="File structure">
      File structure
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../wealth/" title="Generating wealth">
      Generating wealth
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cli-gui/" title="GUI">
      GUI
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-7" id="nav-1-5-7" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-7">
      Benchmarks
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="3">
<label class="md-nav__title" for="nav-1-5-7">
        Benchmarks
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-toggle md-nav__toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
        Performance benchmark
      </label>
<a class="md-nav__link md-nav__link--active" href="./" title="Performance benchmark">
      Performance benchmark
    </a>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#what-is-it">
    What is it?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#how-does-it-work">
    How does it work?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#how-to-use">
    How to use
  </a>
<nav class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#simple-example">
    Simple example
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#requirements-for-tested-function">
    Requirements for tested function
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#execution-options">
    Execution options
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#limitations">
    Limitations
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#testing-aea-handlers-example">
    Testing AEA. Handlers example:
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-8" id="nav-1-5-8" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-8">
      API
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="3">
<label class="md-nav__title" for="nav-1-5-8">
        API
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../api/aea/" title="AEA">
      AEA
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/aea_builder/" title="AEA Builder">
      AEA Builder
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/agent/" title="Agent">
      Agent
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/agent_loop/" title="Agent Loop">
      Agent Loop
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/launcher/" title="Launcher">
      Launcher
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/multiplexer/" title="Multiplexer">
      Multiplexer
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/runner/" title="Runner">
      Runner
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/runtime/" title="Runtime">
      Runtime
    </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-8-9" id="nav-1-5-8-9" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-8-9">
      Components
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="4">
<label class="md-nav__title" for="nav-1-5-8-9">
        Components
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../api/components/base/" title="Base">
      Base
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/components/loader/" title="Loader">
      Loader
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-8-10" id="nav-1-5-8-10" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-8-10">
      Configurations
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="4">
<label class="md-nav__title" for="nav-1-5-8-10">
        Configurations
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../api/configurations/base/" title="Base">
      Base
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/configurations/components/" title="Components">
      Components
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/configurations/constants/" title="Constants">
      Constants
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/configurations/loader/" title="Loader">
      Loader
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-8-11" id="nav-1-5-8-11" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-8-11">
      Connections
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="4">
<label class="md-nav__title" for="nav-1-5-8-11">
        Connections
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../api/connections/base/" title="Base">
      Base
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/connections/stub/connection/" title="Stub Connection">
      Stub Connection
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/context/base/" title="Context">
      Context
    </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-8-13" id="nav-1-5-8-13" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-8-13">
      Contracts
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="4">
<label class="md-nav__title" for="nav-1-5-8-13">
        Contracts
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../api/contracts/base/" title="Base">
      Base
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/contracts/ethereum/" title="Ethereum">
      Ethereum
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-8-14" id="nav-1-5-8-14" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-8-14">
      Crypto
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="4">
<label class="md-nav__title" for="nav-1-5-8-14">
        Crypto
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../api/crypto/base/" title="Base">
      Base
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/crypto/cosmos/" title="Cosmos">
      Cosmos
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/crypto/ethereum/" title="Ethereum">
      Ethereum
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/crypto/fetchai/" title="Fetchai">
      Fetchai
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/crypto/helpers/" title="Helpers">
      Helpers
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/crypto/ledger_apis/" title="LedgerApis">
      LedgerApis
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/crypto/registry/" title="Registry">
      Registry
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/crypto/wallet/" title="Wallet">
      Wallet
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-8-15" id="nav-1-5-8-15" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-8-15">
      Decision Maker
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="4">
<label class="md-nav__title" for="nav-1-5-8-15">
        Decision Maker
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../api/decision_maker/base/" title="Base">
      Base
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/decision_maker/default/" title="Default">
      Default
    </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-8-15-3" id="nav-1-5-8-15-3" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-8-15-3">
      Messages
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="5">
<label class="md-nav__title" for="nav-1-5-8-15-3">
        Messages
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../api/decision_maker/messages/base/" title="Base">
      Base
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/decision_maker/messages/state_update/" title="State Update">
      State Update
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/decision_maker/messages/transaction/" title="Transaction">
      Transaction
    </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-8-16" id="nav-1-5-8-16" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-8-16">
      Helpers
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="4">
<label class="md-nav__title" for="nav-1-5-8-16">
        Helpers
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../api/helpers/async_friendly_queue/" title="Async Friendly Queue">
      Async Friendly Queue
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/helpers/async_utils/" title="Async Utils">
      Async Utils
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/helpers/base/" title="Base">
      Base
    </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-8-16-4" id="nav-1-5-8-16-4" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-8-16-4">
      Dialogue
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="5">
<label class="md-nav__title" for="nav-1-5-8-16-4">
        Dialogue
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../api/helpers/dialogue/base/" title="Base">
      Base
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/helpers/exception_policy/" title="Exception Policy">
      Exception Policy
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/helpers/exec_timeout/" title="Exec Timeout">
      Exec Timeout
    </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-8-16-7" id="nav-1-5-8-16-7" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-8-16-7">
      IPFS
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="5">
<label class="md-nav__title" for="nav-1-5-8-16-7">
        IPFS
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../api/helpers/ipfs/base/" title="Base">
      Base
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-8-16-8" id="nav-1-5-8-16-8" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-8-16-8">
      Preferences
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="5">
<label class="md-nav__title" for="nav-1-5-8-16-8">
        Preferences
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../api/helpers/preference_representations/base/" title="Base">
      Base
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-8-16-9" id="nav-1-5-8-16-9" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-8-16-9">
      Search
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="5">
<label class="md-nav__title" for="nav-1-5-8-16-9">
        Search
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../api/helpers/search/generic/" title="Generic">
      Generic
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/helpers/search/models/" title="Models">
      Models
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/helpers/test_cases/" title="Test Cases">
      Test Cases
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/identity/base/" title="Identity">
      Identity
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/mail/base/" title="Mail">
      Mail
    </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-8-19" id="nav-1-5-8-19" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-8-19">
      Protocols
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="4">
<label class="md-nav__title" for="nav-1-5-8-19">
        Protocols
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../api/protocols/base/" title="Base">
      Base
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/protocols/generator/" title="Generator">
      Generator
    </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-8-19-3" id="nav-1-5-8-19-3" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-8-19-3">
      Default Protocol
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="5">
<label class="md-nav__title" for="nav-1-5-8-19-3">
        Default Protocol
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../api/protocols/default/custom_types/" title="Custom Types">
      Custom Types
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/protocols/default/message/" title="Message">
      Message
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/protocols/default/serialization/" title="Serialization">
      Serialization
    </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-8-20" id="nav-1-5-8-20" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-8-20">
      Registries
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="4">
<label class="md-nav__title" for="nav-1-5-8-20">
        Registries
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../api/registries/base/" title="Base">
      Base
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/registries/filter/" title="Filter">
      Filter
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/registries/resources/" title="Resources">
      Resources
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-5-8-21" id="nav-1-5-8-21" type="checkbox"/>
<label class="md-nav__link" for="nav-1-5-8-21">
      Skills
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="4">
<label class="md-nav__title" for="nav-1-5-8-21">
        Skills
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../api/skills/base/" title="Base">
      Base
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/skills/error/handlers/" title="Error Skill">
      Error Skill
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/skills/behaviours/" title="Behaviors">
      Behaviors
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/skills/tasks/" title="Task">
      Task
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../api/test_tools/generic/" title="Test Tools">
      Test Tools
    </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../questions-and-answers/" title="Q&amp;A">
      Q&amp;A
    </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#what-is-it">
    What is it?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#how-does-it-work">
    How does it work?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#how-to-use">
    How to use
  </a>
<nav class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#simple-example">
    Simple example
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#requirements-for-tested-function">
    Requirements for tested function
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#execution-options">
    Execution options
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#limitations">
    Limitations
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#testing-aea-handlers-example">
    Testing AEA. Handlers example:
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<h1>Performance benchmark</h1>
<p>Test AEA framework performance.</p>
<h2 id="what-is-it">What is it?</h2>
<p>The benchmark module is a set of tools to measure execution time, CPU load and memory usage of the AEA Python code. It produces text reports and draws charts to present the results.</p>
<h2 id="how-does-it-work">How does it work?</h2>
<p>The framework:
* spawns a dedicated process for each test run to execute the function to test.
* measures CPU and RAM usage periodically.
* waits for function exits or terminates them by timeout.
* repeats test execution multiple times to get more accurate results.</p>
<h2 id="how-to-use">How to use</h2>
<p>Steps to run a test:</p>
<ul>
<li>Write a function you would like to test with all arguments you would like to parameterise, add some doc strings.</li>
<li>Split the function into two parts: prepare part and performance part. The prepare part will not be included in the measurement.</li>
<li>Add <code>BenchmarkControl</code> support, to notify framework to start measurement.</li>
<li>Import <code>TestCli</code> class,  TestCli().run(function_to_be_tested)</li>
<li>Call it from console to get text results.</li>
</ul>
<h3 id="simple-example">Simple example</h3>
<p><code>cpuburn</code> - simple test of CPU load depends on idle sleep time. Shows how much CPU consumed during the execution.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">time</span>

<span class="kn">from</span> <span class="nn">benchmark.framework.benchmark</span> <span class="kn">import</span> <span class="n">BenchmarkControl</span>
<span class="kn">from</span> <span class="nn">benchmark.framework.cli</span> <span class="kn">import</span> <span class="n">TestCli</span>


<span class="k">def</span> <span class="nf">cpu_burn</span><span class="p">(</span><span class="n">benchmark</span><span class="p">:</span> <span class="n">BenchmarkControl</span><span class="p">,</span> <span class="n">run_time</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sleep</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Do nothing, just burn cpu to check cpu load changed on sleep.</span>

<span class="sd">    :param benchmark: benchmark special parameter to communicate with executor</span>
<span class="sd">    :param run_time: time limit to run this function</span>
<span class="sd">    :param sleep: time to sleep in loop</span>

<span class="sd">    :return: None</span>
<span class="sd">    """</span>
    <span class="n">benchmark</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">sleep</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span> <span class="o">&gt;=</span> <span class="n">run_time</span><span class="p">:</span>
            <span class="k">break</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="n">TestCli</span><span class="p">(</span><span class="n">cpu_burn</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
<p>Run it with <code>python ./benchmark/cases/cpu_burn.py --help</code> to get help about usage.
<div class="highlight"><pre><span></span><code>Usage: cpu_burn.py <span class="o">[</span>OPTIONS<span class="o">]</span> <span class="o">[</span>ARGS<span class="o">]</span>...

       Do nothing, just burn cpu to check cpu load changed on sleep.

  :param benchmark: benchmark special parameter to communicate with executor
  :param run_time: <span class="nb">time</span> limit to run this <span class="k">function</span> :param sleep: <span class="nb">time</span> to sleep in loop

  :return: None

      ARGS is <span class="k">function</span> arguments in format: <span class="sb">`</span>run_time,sleep<span class="sb">`</span>

      default ARGS is <span class="sb">`</span><span class="m">10</span>,0.0001<span class="sb">`</span>

Options:
  --timeout FLOAT               Executor timeout in seconds  <span class="o">[</span>default: <span class="m">10</span>.0<span class="o">]</span>
  --period FLOAT                Period <span class="k">for</span> measurement  <span class="o">[</span>default: <span class="m">0</span>.1<span class="o">]</span>
  -N, --num-executions INTEGER  Number of runs <span class="k">for</span> each <span class="k">case</span>  <span class="o">[</span>default: <span class="m">1</span><span class="o">]</span>
  -P, --plot INTEGER            X axis parameter idx
  --help                        Show this message and exit.
</code></pre></div></p>
<p>Run it with <code>python ./benchmark/cases/cpu_burn.py</code> to start with default parameters.
<div class="highlight"><pre><span></span><code>Test execution timeout: <span class="m">10</span>.0
Test execution measure period: <span class="m">0</span>.1
Tested <span class="k">function</span> name: cpu_burn
Tested <span class="k">function</span> description:
    Do nothing, just burn cpu to check cpu load changed on sleep.

    :param benchmark: benchmark special parameter to communicate with executor
    :param run_time: <span class="nb">time</span> limit to run this <span class="k">function</span>
    :param sleep: <span class="nb">time</span> to sleep in loop

    :return: None

Tested <span class="k">function</span> argument names: <span class="o">[</span><span class="s1">'run_time'</span>, <span class="s1">'sleep'</span><span class="o">]</span>
Tested <span class="k">function</span> argument default values: <span class="o">[</span><span class="m">10</span>, <span class="m">0</span>.0001<span class="o">]</span>

<span class="o">==</span> Report created <span class="m">2020</span>-04-27 <span class="m">15</span>:14:56.076549 <span class="o">==</span>
Arguments are <span class="sb">`</span><span class="o">[</span><span class="m">10</span>, <span class="m">0</span>.0001<span class="o">]</span><span class="sb">`</span>
Number of runs: <span class="m">1</span>
Number of <span class="nb">time</span> terminated: <span class="m">0</span>
Time passed <span class="o">(</span>seconds<span class="o">)</span>: <span class="m">10</span>.031443119049072 ± <span class="m">0</span>
cpu min <span class="o">(</span>%<span class="o">)</span>: <span class="m">0</span>.0 ± <span class="m">0</span>
cpu max <span class="o">(</span>%<span class="o">)</span>: <span class="m">10</span>.0 ± <span class="m">0</span>
cpu mean <span class="o">(</span>%<span class="o">)</span>: <span class="m">3</span>.4 ± <span class="m">0</span>
mem min <span class="o">(</span>kb<span class="o">)</span>: <span class="m">53</span>.98828125 ± <span class="m">0</span>
mem max <span class="o">(</span>kb<span class="o">)</span>: <span class="m">53</span>.98828125 ± <span class="m">0</span>
mem mean <span class="o">(</span>kb<span class="o">)</span>: <span class="m">53</span>.98828125 ± <span class="m">0</span>
</code></pre></div></p>
<p>Here you can see test report for default arguments set.</p>
<p>Run with multiple arguments set, multiple repeats and draw a chart on resources
<code>python ./benchmark/cases/cpu_burn.py -N 5 -P 1 3,0.00001 3,0.001 3,0.01</code></p>
<p>Report is:
<div class="highlight"><pre><span></span><code>Test execution timeout: <span class="m">10</span>.0
Test execution measure period: <span class="m">0</span>.1
Tested <span class="k">function</span> name: cpu_burn
Tested <span class="k">function</span> description:
    Do nothing, just burn cpu to check cpu load changed on sleep.

    :param benchmark: benchmark special parameter to communicate with executor
    :param run_time: <span class="nb">time</span> limit to run this <span class="k">function</span>
    :param sleep: <span class="nb">time</span> to sleep in loop

    :return: None

Tested <span class="k">function</span> argument names: <span class="o">[</span><span class="s1">'run_time'</span>, <span class="s1">'sleep'</span><span class="o">]</span>
Tested <span class="k">function</span> argument default values: <span class="o">[</span><span class="m">10</span>, <span class="m">0</span>.0001<span class="o">]</span>

<span class="o">==</span> Report created <span class="m">2020</span>-04-27 <span class="m">15</span>:38:17.849535 <span class="o">==</span>
Arguments are <span class="sb">`</span><span class="o">(</span><span class="m">3</span>, 1e-05<span class="o">)</span><span class="sb">`</span>
Number of runs: <span class="m">5</span>
Number of <span class="nb">time</span> terminated: <span class="m">0</span>
Time passed <span class="o">(</span>seconds<span class="o">)</span>: <span class="m">3</span>.0087939262390138 ± <span class="m">0</span>.0001147521277690166
cpu min <span class="o">(</span>%<span class="o">)</span>: <span class="m">0</span>.0 ± <span class="m">0</span>.0
cpu max <span class="o">(</span>%<span class="o">)</span>: <span class="m">11</span>.0 ± <span class="m">2</span>.23606797749979
cpu mean <span class="o">(</span>%<span class="o">)</span>: <span class="m">6</span>.2 ± <span class="m">0</span>.18257418583505522
mem min <span class="o">(</span>kb<span class="o">)</span>: <span class="m">54</span>.0265625 ± <span class="m">0</span>.11180339887498948
mem max <span class="o">(</span>kb<span class="o">)</span>: <span class="m">54</span>.0265625 ± <span class="m">0</span>.11180339887498948
mem mean <span class="o">(</span>kb<span class="o">)</span>: <span class="m">54</span>.0265625 ± <span class="m">0</span>.11180339887498948
<span class="o">==</span> Report created <span class="m">2020</span>-04-27 <span class="m">15</span>:38:32.947308 <span class="o">==</span>
Arguments are <span class="sb">`</span><span class="o">(</span><span class="m">3</span>, <span class="m">0</span>.001<span class="o">)</span><span class="sb">`</span>
Number of runs: <span class="m">5</span>
Number of <span class="nb">time</span> terminated: <span class="m">0</span>
Time passed <span class="o">(</span>seconds<span class="o">)</span>: <span class="m">3</span>.014109659194946 ± <span class="m">0</span>.0004416575764579524
cpu min <span class="o">(</span>%<span class="o">)</span>: <span class="m">0</span>.0 ± <span class="m">0</span>.0
cpu max <span class="o">(</span>%<span class="o">)</span>: <span class="m">8</span>.0 ± <span class="m">2</span>.7386127875258306
cpu mean <span class="o">(</span>%<span class="o">)</span>: <span class="m">1</span>.9986666666666666 ± <span class="m">0</span>.002981423969999689
mem min <span class="o">(</span>kb<span class="o">)</span>: <span class="m">53</span>.9890625 ± <span class="m">0</span>.10431954926750306
mem max <span class="o">(</span>kb<span class="o">)</span>: <span class="m">53</span>.9890625 ± <span class="m">0</span>.10431954926750306
mem mean <span class="o">(</span>kb<span class="o">)</span>: <span class="m">53</span>.9890625 ± <span class="m">0</span>.10431954926750306
<span class="o">==</span> Report created <span class="m">2020</span>-04-27 <span class="m">15</span>:38:48.067511 <span class="o">==</span>
Arguments are <span class="sb">`</span><span class="o">(</span><span class="m">3</span>, <span class="m">0</span>.01<span class="o">)</span><span class="sb">`</span>
Number of runs: <span class="m">5</span>
Number of <span class="nb">time</span> terminated: <span class="m">0</span>
Time passed <span class="o">(</span>seconds<span class="o">)</span>: <span class="m">3</span>.0181806087493896 ± <span class="m">0</span>.0022409499756841883
cpu min <span class="o">(</span>%<span class="o">)</span>: <span class="m">0</span>.0 ± <span class="m">0</span>.0
cpu max <span class="o">(</span>%<span class="o">)</span>: <span class="m">1</span>.0 ± <span class="m">2</span>.23606797749979
cpu mean <span class="o">(</span>%<span class="o">)</span>: <span class="m">0</span>.06666666666666667 ± <span class="m">0</span>.14907119849998599
mem min <span class="o">(</span>kb<span class="o">)</span>: <span class="m">53</span>.9078125 ± <span class="m">0</span>.11487297672320501
mem max <span class="o">(</span>kb<span class="o">)</span>: <span class="m">53</span>.9078125 ± <span class="m">0</span>.11487297672320501
mem mean <span class="o">(</span>kb<span class="o">)</span>: <span class="m">53</span>.9078125 ± <span class="m">0</span>.11487297672320501
</code></pre></div></p>
<p>Chart is drawn for argument 1: sleep:
<center><img alt="Char over argument 1 - sleep value" src="../assets/benchmark_chart.png"/></center></p>
<p>The most interesting part is CPU usage, as you can see  cPU usage decreases with increasing value of idle sleep.
Memory usage and execution time can slightly differ per case execution.</p>
<h2 id="requirements-for-tested-function">Requirements for tested function</h2>
<ul>
<li>The first function's argument has to be <code>benchmark: BenchmarkControl</code> which is passed by default by the framework.</li>
<li>All arguments except the fist one have to set default values.</li>
<li>Function doc string is required, it used for help information.</li>
<li><code>benchmark.start()</code> has to be called once in the function body to start measurement. The timeout is counted from this point!</li>
<li>All the "prepare part" in the function that should not be measured has to be placed before <code>benchmark.start()</code></li>
<li>Code to be measured has to go after <code>benchmark.start()</code></li>
<li>Try to avoid infinitive loops and assume the test should exit after a while.</li>
</ul>
<h2 id="execution-options">Execution options</h2>
<ul>
<li>To pass an arguments set just provide it as a comma separated string like <code>10,0.1</code></li>
<li>To pass several argument sets just separate them by whitespace <code>10,0.1 20,0.2</code></li>
<li><code>--timeout FLOAT</code> is test execution timeout in seconds. If the test takes more time, it will be terminated.</li>
<li><code>--period FLOAT</code> is measurement interval in seconds, how often to make CPU and RAM usage measurements.</li>
<li><code>-N, --num-executions INTEGER</code> - how many time to run the same argument set to make result more accurate.</li>
<li><code>-P, --plot INTEGER</code> -  Draw a chart using, using values of argument specified as values for axis X. argument positions started with 0, argument benchmark does not counted. for example <code>-P 0</code> will use <code>run_time</code> values, <code>-P 1</code> will use <code>sleep</code> values.</li>
</ul>
<h2 id="limitations">Limitations</h2>
<p>Currently, the benchmark framework does not measure resources consumed by subprocess spawned in python code. So try to keep one process solutions during tests.</p>
<p>Asynchronous functions or coroutines are not supported directly. So you have to set up an event loop inside test function and start loop manually.</p>
<h2 id="testing-aea-handlers-example">Testing AEA. Handlers example:</h2>
<p>Test react speed on specific messages amount.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">react_speed_in_loop</span><span class="p">(</span><span class="n">benchmark</span><span class="p">:</span> <span class="n">BenchmarkControl</span><span class="p">,</span> <span class="n">inbox_amount</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Test inbox message processing in a loop.</span>

<span class="sd">    :param benchmark: benchmark special parameter to communicate with executor</span>
<span class="sd">    :param inbox_amount: num of inbox messages for every agent</span>

<span class="sd">    :return: None</span>
<span class="sd">    """</span>

    <span class="n">skill_definition</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"handlers"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"dummy_handler"</span><span class="p">:</span> <span class="n">DummyHandler</span><span class="p">}</span>
    <span class="p">}</span>
    <span class="n">aea_test_wrapper</span> <span class="o">=</span> <span class="n">AEATestWrapper</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">"dummy agent"</span><span class="p">,</span>
        <span class="n">skills</span><span class="o">=</span><span class="p">[</span><span class="n">skill_definition</span><span class="p">],</span>
    <span class="p">)</span>

    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">inbox_amount</span><span class="p">):</span>
        <span class="n">aea_test_wrapper</span><span class="o">.</span><span class="n">put_inbox</span><span class="p">(</span><span class="n">aea_test_wrapper</span><span class="o">.</span><span class="n">dummy_envelope</span><span class="p">())</span>

    <span class="n">aea_test_wrapper</span><span class="o">.</span><span class="n">set_loop_timeout</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="n">benchmark</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="n">aea_test_wrapper</span><span class="o">.</span><span class="n">start_loop</span><span class="p">()</span>

    <span class="k">while</span> <span class="ow">not</span> <span class="n">aea_test_wrapper</span><span class="o">.</span><span class="n">is_inbox_empty</span><span class="p">():</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

    <span class="n">aea_test_wrapper</span><span class="o">.</span><span class="n">stop_loop</span><span class="p">()</span>
</code></pre></div>
<p><strong>create AEA wrapper with specified handler</strong>
<div class="highlight"><pre><span></span><code><span class="n">skill_definition</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"handlers"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"dummy_handler"</span><span class="p">:</span> <span class="n">DummyHandler</span><span class="p">}</span>
<span class="p">}</span>
<span class="n">aea_test_wrapper</span> <span class="o">=</span> <span class="n">AEATestWrapper</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">"dummy agent"</span><span class="p">,</span>
    <span class="n">skills</span><span class="o">=</span><span class="p">[</span><span class="n">skill_definition</span><span class="p">],</span>
<span class="p">)</span>
</code></pre></div></p>
<p><strong>populate inbox with dummy messages</strong>
<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">inbox_amount</span><span class="p">):</span>
    <span class="n">aea_test_wrapper</span><span class="o">.</span><span class="n">put_inbox</span><span class="p">(</span><span class="n">aea_test_wrapper</span><span class="o">.</span><span class="n">dummy_envelope</span><span class="p">())</span>
</code></pre></div></p>
<p><strong>set timeout 0, for maximum messages processing speed</strong>
<code>aea_test_wrapper.set_loop_timeout(0.0)</code></p>
<p><strong>start benchmark</strong>
<code>benchmark.start()</code></p>
<p><strong>start/stop AEA</strong>
<div class="highlight"><pre><span></span><code><span class="n">aea_test_wrapper</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="o">...</span>
<span class="n">aea_test_wrapper</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div></p>
<p><strong>wait till messages present in inbox.</strong>
<div class="highlight"><pre><span></span><code><span class="k">while</span> <span class="ow">not</span> <span class="n">aea_test_wrapper</span><span class="o">.</span><span class="n">is_inbox_empty</span><span class="p">():</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
</code></pre></div></p>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a class="md-flex md-footer-nav__link md-footer-nav__link--prev" href="../cli-gui/" rel="prev" title="GUI">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
                  Previous
                </span>
                GUI
              </span>
</div>
</a>
<a class="md-flex md-footer-nav__link md-footer-nav__link--next" href="../api/aea/" rel="next" title="AEA">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
                  Next
                </span>
                AEA
              </span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org" rel="noopener" target="_blank">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs</a>
</div>
</div>
</div>
</footer>
</div>
<script src="../assets/javascripts/application.c33a9706.js"></script>
<script>app.initialize({version:"1.1.2",url:{base:".."}})</script>
<script src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js"></script>
</body>
</html>